{"ast":null,"code":"// Updated erc1155Approvals.js\nimport { ethers } from \"ethers\";\nimport getProvider from \"./provider\"; // Ensure provider.js exists in utils\nimport { CONTRACT_ADDRESSES } from \"../constants/abis\"; // ‚úÖ Fix path\n\nexport async function getERC721Approvals(userAddress) {\n  try {\n    const provider = getProvider();\n    const signer = provider.getSigner();\n    const contractAddress = CONTRACT_ADDRESSES.TestNFT; // ‚úÖ Ensure this is correct\n\n    const erc721 = new ethers.Contract(contractAddress, [\"function isApprovedForAll(address owner, address operator) view returns (bool)\"], signer);\n    const operatorAddress = CONTRACT_ADDRESSES.MockSpender;\n    console.log(\"üîç Checking ERC-721 Approvals for:\", contractAddress);\n    const isApproved = await erc721.isApprovedForAll(userAddress, operatorAddress);\n    console.log(\"‚úÖ ERC-721 Approval Status:\", isApproved);\n    return isApproved;\n  } catch (error) {\n    console.error(\"‚ùå Error fetching ERC-721 approvals:\", error);\n    return false;\n  }\n}\nexport async function revokeERC1155Approval(userAddress) {\n  try {\n    const provider = getProvider();\n    const signer = provider.getSigner();\n    const nftContractAddress = CONTRACT_ADDRESSES.TestERC1155;\n    const nftContract = new ethers.Contract(nftContractAddress, [\"function setApprovalForAll(address operator, bool approved) external\"], signer);\n    const operatorAddress = CONTRACT_ADDRESSES.MockSpender;\n    console.log(\"üõë Revoking ERC-1155 Approval for:\", operatorAddress);\n    const tx = await nftContract.setApprovalForAll(operatorAddress, false);\n    await tx.wait();\n    console.log(\"‚úÖ ERC-1155 Approval Revoked\");\n  } catch (error) {\n    console.error(\"‚ùå Error revoking ERC-1155 approval:\", error);\n  }\n}\nexport async function batchRevokeERC1155Approvals(userAddresses) {\n  try {\n    for (const userAddress of userAddresses) {\n      await revokeERC1155Approval(userAddress);\n    }\n  } catch (error) {\n    console.error(\"‚ùå Error in batch revocation of ERC-1155 approvals:\", error);\n  }\n}","map":{"version":3,"names":["ethers","getProvider","CONTRACT_ADDRESSES","getERC721Approvals","userAddress","provider","signer","getSigner","contractAddress","TestNFT","erc721","Contract","operatorAddress","MockSpender","console","log","isApproved","isApprovedForAll","error","revokeERC1155Approval","nftContractAddress","TestERC1155","nftContract","tx","setApprovalForAll","wait","batchRevokeERC1155Approvals","userAddresses"],"sources":["/Users/markemery/mini.revoke/src/utils/erc1155Approvals.js"],"sourcesContent":["// Updated erc1155Approvals.js\nimport { ethers } from \"ethers\";\nimport getProvider from \"./provider\"; // Ensure provider.js exists in utils\nimport { CONTRACT_ADDRESSES } from \"../constants/abis\"; // ‚úÖ Fix path\n\n\n\nexport async function getERC721Approvals(userAddress) {\n    try {\n        const provider = getProvider();\n        const signer = provider.getSigner();\n        const contractAddress = CONTRACT_ADDRESSES.TestNFT; // ‚úÖ Ensure this is correct\n\n        const erc721 = new ethers.Contract(\n            contractAddress,\n            [\"function isApprovedForAll(address owner, address operator) view returns (bool)\"],\n            signer\n        );\n\n        const operatorAddress = CONTRACT_ADDRESSES.MockSpender;\n        console.log(\"üîç Checking ERC-721 Approvals for:\", contractAddress);\n\n        const isApproved = await erc721.isApprovedForAll(userAddress, operatorAddress);\n        console.log(\"‚úÖ ERC-721 Approval Status:\", isApproved);\n        return isApproved;\n    } catch (error) {\n        console.error(\"‚ùå Error fetching ERC-721 approvals:\", error);\n        return false;\n    }\n}\n\nexport async function revokeERC1155Approval(userAddress) {\n    try {\n        const provider = getProvider();\n        const signer = provider.getSigner();\n        const nftContractAddress = CONTRACT_ADDRESSES.TestERC1155;\n        const nftContract = new ethers.Contract(nftContractAddress, [\n            \"function setApprovalForAll(address operator, bool approved) external\"\n        ], signer);\n        \n        const operatorAddress = CONTRACT_ADDRESSES.MockSpender;\n        console.log(\"üõë Revoking ERC-1155 Approval for:\", operatorAddress);\n        \n        const tx = await nftContract.setApprovalForAll(operatorAddress, false);\n        await tx.wait();\n        console.log(\"‚úÖ ERC-1155 Approval Revoked\");\n    } catch (error) {\n        console.error(\"‚ùå Error revoking ERC-1155 approval:\", error);\n    }\n}\n\nexport async function batchRevokeERC1155Approvals(userAddresses) {\n    try {\n        for (const userAddress of userAddresses) {\n            await revokeERC1155Approval(userAddress);\n        }\n    } catch (error) {\n        console.error(\"‚ùå Error in batch revocation of ERC-1155 approvals:\", error);\n    }\n}\n\n\n"],"mappings":"AAAA;AACA,SAASA,MAAM,QAAQ,QAAQ;AAC/B,OAAOC,WAAW,MAAM,YAAY,CAAC,CAAC;AACtC,SAASC,kBAAkB,QAAQ,mBAAmB,CAAC,CAAC;;AAIxD,OAAO,eAAeC,kBAAkBA,CAACC,WAAW,EAAE;EAClD,IAAI;IACA,MAAMC,QAAQ,GAAGJ,WAAW,CAAC,CAAC;IAC9B,MAAMK,MAAM,GAAGD,QAAQ,CAACE,SAAS,CAAC,CAAC;IACnC,MAAMC,eAAe,GAAGN,kBAAkB,CAACO,OAAO,CAAC,CAAC;;IAEpD,MAAMC,MAAM,GAAG,IAAIV,MAAM,CAACW,QAAQ,CAC9BH,eAAe,EACf,CAAC,gFAAgF,CAAC,EAClFF,MACJ,CAAC;IAED,MAAMM,eAAe,GAAGV,kBAAkB,CAACW,WAAW;IACtDC,OAAO,CAACC,GAAG,CAAC,oCAAoC,EAAEP,eAAe,CAAC;IAElE,MAAMQ,UAAU,GAAG,MAAMN,MAAM,CAACO,gBAAgB,CAACb,WAAW,EAAEQ,eAAe,CAAC;IAC9EE,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAEC,UAAU,CAAC;IACrD,OAAOA,UAAU;EACrB,CAAC,CAAC,OAAOE,KAAK,EAAE;IACZJ,OAAO,CAACI,KAAK,CAAC,qCAAqC,EAAEA,KAAK,CAAC;IAC3D,OAAO,KAAK;EAChB;AACJ;AAEA,OAAO,eAAeC,qBAAqBA,CAACf,WAAW,EAAE;EACrD,IAAI;IACA,MAAMC,QAAQ,GAAGJ,WAAW,CAAC,CAAC;IAC9B,MAAMK,MAAM,GAAGD,QAAQ,CAACE,SAAS,CAAC,CAAC;IACnC,MAAMa,kBAAkB,GAAGlB,kBAAkB,CAACmB,WAAW;IACzD,MAAMC,WAAW,GAAG,IAAItB,MAAM,CAACW,QAAQ,CAACS,kBAAkB,EAAE,CACxD,sEAAsE,CACzE,EAAEd,MAAM,CAAC;IAEV,MAAMM,eAAe,GAAGV,kBAAkB,CAACW,WAAW;IACtDC,OAAO,CAACC,GAAG,CAAC,oCAAoC,EAAEH,eAAe,CAAC;IAElE,MAAMW,EAAE,GAAG,MAAMD,WAAW,CAACE,iBAAiB,CAACZ,eAAe,EAAE,KAAK,CAAC;IACtE,MAAMW,EAAE,CAACE,IAAI,CAAC,CAAC;IACfX,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC;EAC9C,CAAC,CAAC,OAAOG,KAAK,EAAE;IACZJ,OAAO,CAACI,KAAK,CAAC,qCAAqC,EAAEA,KAAK,CAAC;EAC/D;AACJ;AAEA,OAAO,eAAeQ,2BAA2BA,CAACC,aAAa,EAAE;EAC7D,IAAI;IACA,KAAK,MAAMvB,WAAW,IAAIuB,aAAa,EAAE;MACrC,MAAMR,qBAAqB,CAACf,WAAW,CAAC;IAC5C;EACJ,CAAC,CAAC,OAAOc,KAAK,EAAE;IACZJ,OAAO,CAACI,KAAK,CAAC,oDAAoD,EAAEA,KAAK,CAAC;EAC9E;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}