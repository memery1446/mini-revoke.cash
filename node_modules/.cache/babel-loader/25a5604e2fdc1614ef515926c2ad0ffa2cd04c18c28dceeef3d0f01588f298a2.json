{"ast":null,"code":"import { ethers } from \"ethers\";\nimport getProvider from \"./provider\"; // Ensure provider.js exists in utils\nimport { CONTRACT_ADDRESSES } from \"../constants/abis\"; // ‚úÖ Correct import\n\nexport async function getERC1155Approvals(userAddress) {\n  try {\n    const provider = getProvider();\n    const contractAddress = CONTRACT_ADDRESSES.TestERC1155;\n    console.log(\"üîç Fetching ERC-1155 approvals for contract:\", contractAddress);\n    if (!contractAddress || contractAddress === \"0x43c5df0c482c88cef8005389f64c362ee720a5bc\") {\n      throw new Error(\"üö® Invalid ERC-1155 contract address!\");\n    }\n    const contract = new ethers.Contract(contractAddress, [\"function isApprovedForAll(address owner, address operator) view returns (bool)\"], provider);\n    const operatorAddress = CONTRACT_ADDRESSES.MockSpender;\n    console.log(\"üìå Checking approval for operator:\", operatorAddress);\n    const isApproved = await contract.isApprovedForAll(userAddress, operatorAddress);\n    console.log(\"‚úÖ ERC-1155 Approval Status:\", isApproved);\n    return isApproved;\n  } catch (error) {\n    console.error(\"‚ùå Error fetching ERC-1155 approvals:\", error.message);\n    return false;\n  }\n}\nexport async function revokeERC1155Approval(userAddress) {\n  try {\n    const provider = getProvider();\n    const signer = provider.getSigner();\n    const contractAddress = CONTRACT_ADDRESSES.TestERC1155;\n    const erc1155 = new ethers.Contract(contractAddress, [\"function setApprovalForAll(address operator, bool approved) external\"], signer);\n    const operatorAddress = CONTRACT_ADDRESSES.MockSpender;\n    console.log(\"üõë Revoking ERC-1155 Approval for:\", operatorAddress);\n    const tx = await erc1155.setApprovalForAll(operatorAddress, false);\n    await tx.wait();\n    console.log(\"‚úÖ ERC-1155 Approval Revoked\");\n  } catch (error) {\n    console.error(\"‚ùå Error revoking ERC-1155 approval:\", error);\n  }\n}\nexport async function batchRevokeERC1155Approvals(userAddresses) {\n  try {\n    for (const userAddress of userAddresses) {\n      await revokeERC1155Approval(userAddress);\n    }\n  } catch (error) {\n    console.error(\"‚ùå Error in batch revocation of ERC-1155 approvals:\", error);\n  }\n}","map":{"version":3,"names":["ethers","getProvider","CONTRACT_ADDRESSES","getERC1155Approvals","userAddress","provider","contractAddress","TestERC1155","console","log","Error","contract","Contract","operatorAddress","MockSpender","isApproved","isApprovedForAll","error","message","revokeERC1155Approval","signer","getSigner","erc1155","tx","setApprovalForAll","wait","batchRevokeERC1155Approvals","userAddresses"],"sources":["/Users/markemery/mini.revoke/src/utils/erc1155Approvals.js"],"sourcesContent":["import { ethers } from \"ethers\";\nimport getProvider from \"./provider\"; // Ensure provider.js exists in utils\nimport { CONTRACT_ADDRESSES } from \"../constants/abis\"; // ‚úÖ Correct import\n\nexport async function getERC1155Approvals(userAddress) {\n    try {\n        const provider = getProvider();\n        const contractAddress = CONTRACT_ADDRESSES.TestERC1155;\n\n        console.log(\"üîç Fetching ERC-1155 approvals for contract:\", contractAddress);\n\n        if (!contractAddress || contractAddress === \"0x43c5df0c482c88cef8005389f64c362ee720a5bc\") {\n            throw new Error(\"üö® Invalid ERC-1155 contract address!\");\n        }\n\n        const contract = new ethers.Contract(\n            contractAddress,\n            [\"function isApprovedForAll(address owner, address operator) view returns (bool)\"],\n            provider\n        );\n\n        const operatorAddress = CONTRACT_ADDRESSES.MockSpender;\n        console.log(\"üìå Checking approval for operator:\", operatorAddress);\n\n        const isApproved = await contract.isApprovedForAll(userAddress, operatorAddress);\n        console.log(\"‚úÖ ERC-1155 Approval Status:\", isApproved);\n        return isApproved;\n    } catch (error) {\n        console.error(\"‚ùå Error fetching ERC-1155 approvals:\", error.message);\n        return false;\n    }\n}\n\nexport async function revokeERC1155Approval(userAddress) {\n    try {\n        const provider = getProvider();\n        const signer = provider.getSigner();\n        const contractAddress = CONTRACT_ADDRESSES.TestERC1155;\n        const erc1155 = new ethers.Contract(contractAddress, [\n            \"function setApprovalForAll(address operator, bool approved) external\"\n        ], signer);\n        \n        const operatorAddress = CONTRACT_ADDRESSES.MockSpender;\n        console.log(\"üõë Revoking ERC-1155 Approval for:\", operatorAddress);\n        \n        const tx = await erc1155.setApprovalForAll(operatorAddress, false);\n        await tx.wait();\n        console.log(\"‚úÖ ERC-1155 Approval Revoked\");\n    } catch (error) {\n        console.error(\"‚ùå Error revoking ERC-1155 approval:\", error);\n    }\n}\n\nexport async function batchRevokeERC1155Approvals(userAddresses) {\n    try {\n        for (const userAddress of userAddresses) {\n            await revokeERC1155Approval(userAddress);\n        }\n    } catch (error) {\n        console.error(\"‚ùå Error in batch revocation of ERC-1155 approvals:\", error);\n    }\n}\n"],"mappings":"AAAA,SAASA,MAAM,QAAQ,QAAQ;AAC/B,OAAOC,WAAW,MAAM,YAAY,CAAC,CAAC;AACtC,SAASC,kBAAkB,QAAQ,mBAAmB,CAAC,CAAC;;AAExD,OAAO,eAAeC,mBAAmBA,CAACC,WAAW,EAAE;EACnD,IAAI;IACA,MAAMC,QAAQ,GAAGJ,WAAW,CAAC,CAAC;IAC9B,MAAMK,eAAe,GAAGJ,kBAAkB,CAACK,WAAW;IAEtDC,OAAO,CAACC,GAAG,CAAC,8CAA8C,EAAEH,eAAe,CAAC;IAE5E,IAAI,CAACA,eAAe,IAAIA,eAAe,KAAK,4CAA4C,EAAE;MACtF,MAAM,IAAII,KAAK,CAAC,uCAAuC,CAAC;IAC5D;IAEA,MAAMC,QAAQ,GAAG,IAAIX,MAAM,CAACY,QAAQ,CAChCN,eAAe,EACf,CAAC,gFAAgF,CAAC,EAClFD,QACJ,CAAC;IAED,MAAMQ,eAAe,GAAGX,kBAAkB,CAACY,WAAW;IACtDN,OAAO,CAACC,GAAG,CAAC,oCAAoC,EAAEI,eAAe,CAAC;IAElE,MAAME,UAAU,GAAG,MAAMJ,QAAQ,CAACK,gBAAgB,CAACZ,WAAW,EAAES,eAAe,CAAC;IAChFL,OAAO,CAACC,GAAG,CAAC,6BAA6B,EAAEM,UAAU,CAAC;IACtD,OAAOA,UAAU;EACrB,CAAC,CAAC,OAAOE,KAAK,EAAE;IACZT,OAAO,CAACS,KAAK,CAAC,sCAAsC,EAAEA,KAAK,CAACC,OAAO,CAAC;IACpE,OAAO,KAAK;EAChB;AACJ;AAEA,OAAO,eAAeC,qBAAqBA,CAACf,WAAW,EAAE;EACrD,IAAI;IACA,MAAMC,QAAQ,GAAGJ,WAAW,CAAC,CAAC;IAC9B,MAAMmB,MAAM,GAAGf,QAAQ,CAACgB,SAAS,CAAC,CAAC;IACnC,MAAMf,eAAe,GAAGJ,kBAAkB,CAACK,WAAW;IACtD,MAAMe,OAAO,GAAG,IAAItB,MAAM,CAACY,QAAQ,CAACN,eAAe,EAAE,CACjD,sEAAsE,CACzE,EAAEc,MAAM,CAAC;IAEV,MAAMP,eAAe,GAAGX,kBAAkB,CAACY,WAAW;IACtDN,OAAO,CAACC,GAAG,CAAC,oCAAoC,EAAEI,eAAe,CAAC;IAElE,MAAMU,EAAE,GAAG,MAAMD,OAAO,CAACE,iBAAiB,CAACX,eAAe,EAAE,KAAK,CAAC;IAClE,MAAMU,EAAE,CAACE,IAAI,CAAC,CAAC;IACfjB,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC;EAC9C,CAAC,CAAC,OAAOQ,KAAK,EAAE;IACZT,OAAO,CAACS,KAAK,CAAC,qCAAqC,EAAEA,KAAK,CAAC;EAC/D;AACJ;AAEA,OAAO,eAAeS,2BAA2BA,CAACC,aAAa,EAAE;EAC7D,IAAI;IACA,KAAK,MAAMvB,WAAW,IAAIuB,aAAa,EAAE;MACrC,MAAMR,qBAAqB,CAACf,WAAW,CAAC;IAC5C;EACJ,CAAC,CAAC,OAAOa,KAAK,EAAE;IACZT,OAAO,CAACS,KAAK,CAAC,oDAAoD,EAAEA,KAAK,CAAC;EAC9E;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}