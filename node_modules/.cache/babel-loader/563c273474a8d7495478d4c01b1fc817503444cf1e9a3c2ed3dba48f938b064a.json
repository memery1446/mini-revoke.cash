{"ast":null,"code":"import { ethers, Contract } from \"ethers\"; // ‚úÖ Correct import\n\n/** Function to get ERC-1155 Approvals */\nexport async function getERC1155Approvals(nftContractAddress, ownerAddress, provider) {\n  const abi = [\"function isApprovedForAll(address owner, address operator) view returns (bool)\"];\n  const contract = new Contract(nftContractAddress, abi, provider);\n  const operatorAddress = \"0x0000000000000000000000000000000000000000\"; // Replace with actual marketplace\n\n  const isApproved = await contract.isApprovedForAll(ownerAddress, operatorAddress);\n  console.log(`‚úÖ ERC-1155 Approval for All: ${isApproved}`);\n  console.log(\"üîç Fetching ERC-1155 Approval Status...\");\n  console.log(\"üìå Contract Address:\", contractAddress);\n  console.log(\"üìå Owner Address:\", await signer.getAddress());\n  console.log(\"üìå Spender Address:\", spender);\n  console.log(\"üìå isApprovedForAll() Result:\", isApprovedForAll);\n  return isApproved;\n}\n\n/** Function to revoke ERC-1155 Approvals */\nexport async function revokeERC1155Approval(nftContractAddress) {\n  const provider = new BrowserProvider(window.ethereum);\n  const signer = await provider.getSigner();\n  const abi = [\"function setApprovalForAll(address operator, bool approved)\"];\n  const contract = new Contract(nftContractAddress, abi, signer);\n  const tx = await contract.setApprovalForAll(\"0x0000000000000000000000000000000000000000\", false);\n  await tx.wait();\n  console.log(`‚úÖ ERC-1155 Approval Revoked`);\n}\n\n/** Function to batch revoke ERC-1155 approvals */\nexport async function batchRevokeERC1155Approvals(nftContractAddress, signer) {\n  const abi = [\"function isApprovedForAll(address owner, address operator) view returns (bool)\", \"function setApprovalForAll(address operator, bool approved)\"];\n  const contract = new Contract(nftContractAddress, abi, signer);\n  const ownerAddress = await signer.getAddress();\n  const knownOperators = [\"0xMarketplace1\", \"0xMarketplace2\"]; // ‚úÖ Replace with known marketplace addresses\n\n  console.log(\"‚è≥ Checking current ERC-1155 approvals...\");\n  const approvedOperators = [];\n  for (let operator of knownOperators) {\n    const isApproved = await contract.isApprovedForAll(ownerAddress, operator);\n    if (isApproved) approvedOperators.push(operator);\n  }\n  if (approvedOperators.length === 0) {\n    console.log(\"‚úÖ No active approvals found for ERC-1155 tokens. Skipping revocation.\");\n    return;\n  }\n  console.log(`‚è≥ Revoking ERC-1155 approvals for: ${approvedOperators.join(\", \")}`);\n  for (let operator of approvedOperators) {\n    const tx = await contract.setApprovalForAll(operator, false);\n    await tx.wait();\n    console.log(`‚úÖ Revoked approval for: ${operator}`);\n  }\n  console.log(\"‚úÖ All ERC-1155 approvals revoked!\");\n}","map":{"version":3,"names":["ethers","Contract","getERC1155Approvals","nftContractAddress","ownerAddress","provider","abi","contract","operatorAddress","isApproved","isApprovedForAll","console","log","contractAddress","signer","getAddress","spender","revokeERC1155Approval","BrowserProvider","window","ethereum","getSigner","tx","setApprovalForAll","wait","batchRevokeERC1155Approvals","knownOperators","approvedOperators","operator","push","length","join"],"sources":["/Users/markemery/mini.revoke/src/utils/erc1155Approvals.js"],"sourcesContent":["import { ethers, Contract } from \"ethers\"; // ‚úÖ Correct import\n\n/** Function to get ERC-1155 Approvals */\nexport async function getERC1155Approvals(nftContractAddress, ownerAddress, provider) {\n    const abi = [\"function isApprovedForAll(address owner, address operator) view returns (bool)\"];\n    const contract = new Contract(nftContractAddress, abi, provider);\n    const operatorAddress = \"0x0000000000000000000000000000000000000000\"; // Replace with actual marketplace\n\n    const isApproved = await contract.isApprovedForAll(ownerAddress, operatorAddress);\n    console.log(`‚úÖ ERC-1155 Approval for All: ${isApproved}`);\n    console.log(\"üîç Fetching ERC-1155 Approval Status...\");\nconsole.log(\"üìå Contract Address:\", contractAddress);\nconsole.log(\"üìå Owner Address:\", await signer.getAddress());\nconsole.log(\"üìå Spender Address:\", spender);\nconsole.log(\"üìå isApprovedForAll() Result:\", isApprovedForAll);\n\n\n    return isApproved;\n}\n\n/** Function to revoke ERC-1155 Approvals */\nexport async function revokeERC1155Approval(nftContractAddress) {\n    const provider = new BrowserProvider(window.ethereum);\n    const signer = await provider.getSigner();\n    \n    const abi = [\"function setApprovalForAll(address operator, bool approved)\"];\n    const contract = new Contract(nftContractAddress, abi, signer);\n\n    const tx = await contract.setApprovalForAll(\"0x0000000000000000000000000000000000000000\", false);\n    await tx.wait();\n    console.log(`‚úÖ ERC-1155 Approval Revoked`);\n}\n\n/** Function to batch revoke ERC-1155 approvals */\nexport async function batchRevokeERC1155Approvals(nftContractAddress, signer) {\n    const abi = [\n        \"function isApprovedForAll(address owner, address operator) view returns (bool)\",\n        \"function setApprovalForAll(address operator, bool approved)\"\n    ];\n    const contract = new Contract(nftContractAddress, abi, signer);\n    \n    const ownerAddress = await signer.getAddress();\n    const knownOperators = [\n        \"0xMarketplace1\", \"0xMarketplace2\"\n    ]; // ‚úÖ Replace with known marketplace addresses\n\n    console.log(\"‚è≥ Checking current ERC-1155 approvals...\");\n\n    const approvedOperators = [];\n    for (let operator of knownOperators) {\n        const isApproved = await contract.isApprovedForAll(ownerAddress, operator);\n        if (isApproved) approvedOperators.push(operator);\n    }\n\n    if (approvedOperators.length === 0) {\n        console.log(\"‚úÖ No active approvals found for ERC-1155 tokens. Skipping revocation.\");\n        return;\n    }\n\n    console.log(`‚è≥ Revoking ERC-1155 approvals for: ${approvedOperators.join(\", \")}`);\n\n    for (let operator of approvedOperators) {\n        const tx = await contract.setApprovalForAll(operator, false);\n        await tx.wait();\n        console.log(`‚úÖ Revoked approval for: ${operator}`);\n    }\n\n    console.log(\"‚úÖ All ERC-1155 approvals revoked!\");\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}